<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Event Registration</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    :root {
      --primary: #6c63ff;
      --primary-dark: #5146ff;
      --bg: radial-gradient(circle at top, rgba(108, 99, 255, 0.18), transparent 55%),
             radial-gradient(circle at bottom, rgba(255, 123, 197, 0.2), transparent 50%),
             #f4f6fb;
    }

    body {
      min-height: 100vh;
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: #1e1f36;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 3rem 1rem;
    }

    .glass-card {
      width: min(420px, 100%);
      backdrop-filter: blur(18px);
      background: rgba(255, 255, 255, 0.82);
      border-radius: 24px;
      box-shadow: 0 25px 60px rgba(60, 57, 103, 0.15);
      padding: 2.5rem 2rem;
      position: relative;
      overflow: hidden;
      animation: float-in 0.9s ease both;
    }

    .glass-card::before {
      content: "";
      position: absolute;
      inset: -60% 40% 40% -60%;
      background: linear-gradient(140deg, rgba(108, 99, 255, 0.15), rgba(255, 123, 197, 0.08));
      transform: rotate(12deg);
      z-index: 0;
    }

    .glass-card > * {
      position: relative;
      z-index: 1;
    }

    .badge-soft {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(108, 99, 255, 0.12);
      color: var(--primary-dark);
      border-radius: 999px;
      padding: 0.45rem 1.1rem;
      font-weight: 500;
      font-size: 0.85rem;
      animation: pulse 3s infinite;
    }

    .btn-modern {
      background: linear-gradient(135deg, var(--primary), rgba(108, 99, 255, 0.78));
      border: none;
      border-radius: 14px;
      padding: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .btn-modern:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 25px rgba(108, 99, 255, 0.35);
    }

    .floating-shapes span {
      position: absolute;
      border-radius: 50%;
      background: rgba(108, 99, 255, 0.12);
      animation: drift 18s infinite ease-in-out;
      filter: blur(0.3px);
    }

    .floating-shapes span:nth-child(1) {
      width: 120px;
      height: 120px;
      top: -40px;
      right: -50px;
      animation-duration: 16s;
    }

    .floating-shapes span:nth-child(2) {
      width: 90px;
      height: 90px;
      bottom: -30px;
      left: -25px;
      animation-duration: 20s;
    }

    @keyframes float-in {
      from {
        opacity: 0;
        transform: translateY(40px) scale(0.96);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(108, 99, 255, 0.25); }
      50% { box-shadow: 0 0 0 12px rgba(108, 99, 255, 0); }
    }

    @keyframes drift {
      0%, 100% { transform: translate(0, 0); }
      50% { transform: translate(15px, -20px) scale(1.05); }
    }
  </style>
</head>
<body>
  <div class="floating-shapes">
    <span></span>
    <span></span>
  </div>

  <div class="glass-card">
    <div class="badge-soft mb-3">
      <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16" aria-hidden="true">
        <path d="M8 2a5.53 5.53 0 0 0-5.5 5.5A5.53 5.53 0 0 0 8 13a5.53 5.53 0 0 0 5.5-5.5A5.53 5.53 0 0 0 8 2Zm0 9.6a4.1 4.1 0 1 1 4.1-4.1A4.11 4.11 0 0 1 8 11.6Z" />
      </svg>
      Join the experience
    </div>

    <h1 class="fw-semibold mb-2">Register for the Event</h1>
    <p class="text-secondary mb-4">Secure your spot for the next big reveal. Winners will be announced live during the draw.</p>

    <div class="mb-3">
      <label class="form-label">Full Name</label>
      <input id="name" class="form-control form-control-lg" placeholder="Alex Johnson" />
    </div>
    <div class="mb-3">
      <label class="form-label">Email address</label>
      <input id="email" type="email" class="form-control form-control-lg" placeholder="alex@example.com" />
    </div>
    <div class="mb-3">
      <label class="form-label">Phone number</label>
      <input id="phone" class="form-control form-control-lg" placeholder="+46 70 123 45 67" />
    </div>
    <div class="mb-4">
      <label class="form-label">Event code</label>
      <input id="event" class="form-control form-control-lg" placeholder="tech-fest-2025" />
    </div>

    <button id="submitBtn" class="btn btn-modern w-100">Register now</button>

    <div id="message" class="mt-4"></div>

    <div class="text-center mt-4">
      <a class="text-decoration-none fw-semibold" href="winners.html">View the winners hall â†’</a>
    </div>
  </div>

  <script>
    let apiBase = "";

    async function loadConfig() {
      const response = await fetch("config.json?" + Date.now());
      const cfg = await response.json();
      apiBase = cfg.api_url;
    }

    function showMessage(type, text) {
      const msg = document.getElementById("message");
      msg.innerHTML = `<div class="alert alert-${type} shadow-sm" role="alert">${text}</div>`;
    }

    async function handleSubmit() {
      const button = document.getElementById("submitBtn");
      button.disabled = true;
      showMessage("info", "Submitting your registration...");

      const payload = {
        name: document.getElementById("name").value.trim(),
        email: document.getElementById("email").value.trim(),
        phone: document.getElementById("phone").value.trim(),
        event: document.getElementById("event").value.trim(),
      };

      try {
        const response = await fetch(`${apiBase}/register`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        const text = await response.text();
        if (response.ok) {
          showMessage("success", `<strong>Welcome aboard!</strong> ${text}`);
          button.textContent = "Registered";
        } else {
          showMessage("warning", text || "Registration failed. Please try again.");
          button.disabled = false;
        }
      } catch (error) {
        console.error(error);
        showMessage("danger", "Network error. Please try again in a moment.");
        button.disabled = false;
      }
    }

    document.addEventListener("DOMContentLoaded", async () => {
      await loadConfig();
      document.getElementById("submitBtn").addEventListener("click", handleSubmit);
    });
  </script>
</body>
</html>
